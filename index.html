<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>
      Mark “EnderMage99” — Game Design & Gameplay Programming Portfolio
    </title>
    <meta
      name="description"
      content="Game design portfolio focused on AI behaviors, combat readability, crafting UI, and systems design for the Lobotomy Corporation 13 community project."
    />
    <style>
      :root {
        --bg: #0b0d10;
        --card: #12161b;
        --ink: #e9eef4;
        --muted: #a9b7c6;
        --accent: #7bd389;
        --accent-2: #8ac7ff;
        --shadow: rgba(0, 0, 0, 0.35);
        --code: #0f1419;
        --code-ink: #e6edf3;
        --chip: #1c222b;
        --link: #9bd0ff;
        --good: #99e2a1;
        --maxw: 1100px;
        --radius: 14px;
        --pad: 18px;
      }
      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        font: 16px/1.55 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial,
          sans-serif;
        color: var(--ink);
        background: radial-gradient(
          1200px 800px at 80% -10%,
          #1a2330 0%,
          #0b0d10 60%
        );
        background-attachment: fixed;
      }
      a {
        color: var(--link);
        text-decoration: none;
      }
      a:hover {
        text-decoration: underline;
      }
      header {
        position: sticky;
        top: 0;
        z-index: 20;
        backdrop-filter: blur(8px);
        background: linear-gradient(
          180deg,
          rgba(11, 13, 16, 0.85),
          rgba(11, 13, 16, 0.55)
        );
        border-bottom: 1px solid #1c242f;
      }
      nav {
        max-width: var(--maxw);
        margin: 0 auto;
        padding: 10px var(--pad);
        display: flex;
        gap: 16px;
        align-items: center;
        justify-content: space-between;
      }
      nav .brand {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .brand .dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: var(--accent);
        box-shadow: 0 0 18px var(--accent);
      }
      .pill {
        display: inline-flex;
        gap: 8px;
        align-items: center;
        padding: 6px 10px;
        border-radius: 999px;
        background: var(--chip);
        color: var(--muted);
        font-size: 12px;
        border: 1px solid #1f2833;
      }
      .container {
        max-width: var(--maxw);
        margin: 0 auto;
        padding: 40px var(--pad);
      }
      .hero {
        display: grid;
        grid-template-columns: 1.2fr 0.8fr;
        gap: 28px;
        align-items: center;
        padding: 28px;
        background: linear-gradient(180deg, #10161e, #0d131a);
        border: 1px solid #1f2732;
        border-radius: var(--radius);
        box-shadow: 0 10px 40px var(--shadow);
      }
      .hero h1 {
        font-size: 34px;
        margin: 0 0 10px;
      }
      .hero p {
        color: var(--muted);
        margin: 0 0 12px;
      }
      .hero .chips {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-top: 8px;
      }
      .hero .cta {
        display: flex;
        gap: 12px;
        margin-top: 14px;
      }
      .btn {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 10px 14px;
        border-radius: 10px;
        background: var(--accent);
        color: #06240f;
        font-weight: 600;
        border: 1px solid #5fcf78;
      }
      .btn.alt {
        background: transparent;
        color: var(--ink);
        border-color: #2a3543;
      }
      section {
        margin-top: 36px;
      }
      h2 {
        font-size: 22px;
        margin: 0 0 12px;
      }
      .grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 16px;
      }
      .card {
        background: var(--card);
        border: 1px solid #1f2732;
        border-radius: var(--radius);
        padding: 18px;
        box-shadow: 0 6px 28px var(--shadow);
      }
      .card h3 {
        margin: 0 0 6px;
        font-size: 18px;
      }
      .tags {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        margin-top: 10px;
      }
      .tag {
        background: var(--chip);
        color: var(--muted);
        border: 1px solid #233041;
        padding: 4px 8px;
        border-radius: 999px;
        font-size: 12px;
      }
      .meta {
        color: var(--muted);
        font-size: 13px;
      }
      .card ul.meta li {
        font-size: 14.5px;
      }
      .two-col {
        columns: 2;
        column-gap: 18px;
      }
      .two-col p,
      .two-col ul {
        break-inside: avoid;
      }
      /* code */
      pre {
        background: var(--code);
        color: var(--code-ink);
        padding: 14px;
        border-radius: 12px;
        overflow: auto;
        border: 1px solid #1c232c;
        font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
        font-size: 13px;
        line-height: 1.45;
      }
      code {
        font-family: inherit;
      }
      details {
        background: var(--card);
        border: 1px solid #1f2732;
        border-radius: 12px;
        padding: 12px 14px;
      }
      details summary {
        cursor: pointer;
        list-style: none;
        font-weight: 600;
      }
      details summary::-webkit-details-marker {
        display: none;
      }
      .note {
        color: var(--muted);
        font-size: 14px;
      }
      .inline-list {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
      }
      .project-images {
        display: flex;
        flex-direction: column;
        gap: 8px;
        float: right;
        margin-left: 14px;
        margin-bottom: 10px;
      }
      .project-images img {
        width: 120px;
        height: auto;
        border-radius: 8px;
        border: 1px solid #1f2732;
        box-shadow: 0 4px 12px var(--shadow);
      }
      /* Lightbox styles */
      img {
        cursor: pointer;
        transition: opacity 0.2s;
      }
      img:hover {
        opacity: 0.85;
      }
      .lightbox {
        display: none;
        position: fixed;
        z-index: 9999;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        align-items: center;
        justify-content: center;
        cursor: zoom-out;
      }
      .lightbox.active {
        display: flex;
      }
      .lightbox img {
        max-width: 90%;
        max-height: 90%;
        border-radius: 8px;
        box-shadow: 0 0 50px rgba(0, 0, 0, 0.8);
        cursor: default;
      }
      .lightbox-close {
        position: absolute;
        top: 20px;
        right: 30px;
        font-size: 40px;
        color: #fff;
        cursor: pointer;
        font-weight: bold;
        transition: color 0.2s;
      }
      .lightbox-close:hover {
        color: var(--accent);
      }
      footer {
        margin-top: 40px;
        color: var(--muted);
        font-size: 13px;
      }
      /* print */
      @media print {
        header,
        .btn,
        .cta {
          display: none !important;
        }
        body {
          background: #fff;
          color: #000;
        }
        .hero,
        .card,
        details {
          box-shadow: none;
          border-color: #ccc;
        }
        a {
          color: #0645ad;
        }
      }
      @media (max-width: 880px) {
        .hero {
          grid-template-columns: 1fr;
        }
        .grid {
          grid-template-columns: 1fr;
        }
        .two-col {
          columns: 1;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <nav>
        <div class="brand">
          <span class="dot"></span><strong>Mark “EnderMage99”</strong>
          <span class="pill">Game Design & Gameplay Programming</span>
        </div>
        <div class="inline-list">
          <a class="pill" href="#projects">Projects</a>
          <a class="pill" href="#pixelart">Pixel Art</a>
          <a class="pill" href="#codeshowcase">Code Showcase</a>
          <a class="pill" href="#docs">Design Docs</a>
          <a class="pill" href="#contact">Contact</a>
        </div>
      </nav>
    </header>

    <main class="container">
      <!-- HERO -->
      <section class="hero" aria-labelledby="intro">
        <div>
          <h1 id="intro">
            Game Design Portfolio — Systems, AI Behaviors, Sprites, Level Design
          </h1>
          <p>
            I’m a maintainer and contributor since 2023 on the open‑source
            <em>Lobotomy Corporation 13</em> community game. I design
            mobs, implement AI behaviors, draw 2D pixel art and build
            player‑facing systems (upgrade UI). Starting out as just a player 
            who enjoyed the game. However, watching 
            the developers add new features that I enjoyed, inspired me to 
            try to become a developer myself. So I slowly started learning 
            how to improve the game. 
          </p>
          <div class="chips">
            <span class="tag">BYOND DM</span><span class="tag">TGUI</span
            ><span class="tag">Gameplay Systems</span
            ><span class="tag">UI/UX</span><span class="tag">Balance</span
            ><span class="tag">Sprites</span>
          </div>
          <div class="cta">
            <a
              class="btn"
              href="https://github.com/EnderMage99"
              target="_blank"
              rel="noopener"
              >GitHub: EnderMage99</a
            >
            <a
              class="btn alt"
              href="https://wiki.lc13.net/view/Main_Page"
              target="_blank"
              rel="noopener"
              >Project Wiki</a
            >
          </div>
        </div>
        <div>
          <div class="card">
            <h3>Quick facts</h3>
            <ul class="meta">
              <li>
                Focus: readable combat, enemy telegraphs, encounter pacing
              </li>
              <li>Systems: crafting/augmentation, server‑side UI validation</li>
              <li>Art: created/edited combat sprites and effects</li>
              <li>
                Collaboration: code reviews, balance passes, documentation
              </li>
            </ul>
          </div>
        </div>
      </section>

      <!-- PROJECTS -->
      <section id="projects" aria-labelledby="proj-h">
        <h2 id="proj-h">Selected projects</h2>

          <!-- Featured Project - Custom Augments -->
          <article class="card" style="margin-bottom: 20px;">
            <h3>New Upgrade System — Custom Augments</h3>
            <p class="meta">
              Role: Systems, UI (TGUI), Implementation
            </p>
            <p>
              Before this system existed, players lacked meaningful character customization.
              They could only choose weapons and armor, which resulted in repetitive gameplay across encounters.
              I faced the challenge of designing a system that enabled deep player expression while remaining
              accessible and easy to understand.
            </p>
            <p>
              The Custom Augments system allows players to browse a list of simple, individual effects.
              This design enables newcomers to quickly grasp basic combinations and create functional builds,
              while experienced players can experiment with creative effect synergies to craft unique,
              personalized augments tailored to their playstyle.
            </p>
            <ul class="meta">
              <li>
                <strong>What I owned:</strong> fabricate flow, validation,
                preview pipeline, UX copy
              </li>
              <li>
                <strong>Design goal:</strong> empower expression while keeping
                balance guardrails
              </li>
            </ul>
            <div class="tags">
              <span class="tag">TGUI</span
              ><span class="tag">Systems Design</span
              ><span class="tag">Validation</span>
            </div>
            <p class="meta">
              <a
                href="https://github.com/Lobotomy-Corporation-13/lc13/pull/14"
                target="_blank"
                rel="noopener"
                >PR #14 — Custom Augments</a
              >
            </p>
            <div style="margin-top: 14px;">
              <iframe width="100%" height="250" src="https://www.youtube.com/embed/ZfFm4RDKuQc" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style="border-radius: 8px;"></iframe>
            </div>
            <div style="margin-top: 14px; display: flex; gap: 10px; flex-wrap: wrap;">
              <img src="custom_augments_p1.png" alt="Custom Augments UI - Part 1" style="width: calc(33.333% - 7px); border-radius: 8px; border: 1px solid #1f2732;">
              <img src="custom_augments_p2.png" alt="Custom Augments UI - Part 2" style="width: calc(33.333% - 7px); border-radius: 8px; border: 1px solid #1f2732;">
              <img src="custom_augments_p3.png" alt="Custom Augments UI - Part 3" style="width: calc(33.333% - 7px); border-radius: 8px; border: 1px solid #1f2732;">
            </div>
          </article>

        <div class="grid">
          <!-- Project 1 - Metal Fixer -->
          <details class="card">
            <summary>Metal Fixer — Boss Fight Design</summary>
            <div style="margin-top: 12px;">
              <div class="project-images">
                <img src="metal_fixer.png" alt="Metal Fixer encounter" />
              </div>
              <p class="meta">
              Role: Concept design, Developement, Art
              </p>
            <p>
              There was a problem in the game, where players were not incentivised
              to move often. So, this boss was designed to encourage careful positioning
              in order to defeat it.
            </p>
            <ul class="meta">
              <li>
                4 bouncing projectiles which heal the
              Metal Fixer on hit, encouraging players to keep the boss moving around.
              </li>
              <li>
                Spawns statues which as the Metal Fixer takes damage heal the boss if not
                destroyed.
              </li>
              <li>
                If the player is able to force the Metal Fixer to hit
                their own statues with their heavy attack, the players are rewarded with
                the Metal Fixer becoming stunned.
              </li>
            </ul>
            <div class="tags">
              <span class="tag">BYOND DM</span><span class="tag">AI</span
              ><span class="tag">VFX</span><span class="tag">Balance</span>
            </div>
            <p class="meta">
              <a
                href="https://github.com/vlggms/lobotomy-corp13/pull/2002"
                target="_blank"
                rel="noopener"
                >PR #2002 — Flame &amp; Metal Fixers</a
              >
            </p>
            <div style="margin-top: 14px;">
              <iframe width="100%" height="250" src="https://www.youtube.com/embed/S1jKJyr0gvk" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style="border-radius: 8px;"></iframe>
            </div>
            </div>
          </details>

          <!-- Project 2 - Flame Fixer -->
          <details class="card">
            <summary>Flame Fixer — Boss Fight Design</summary>
            <div style="margin-top: 12px;">
              <div class="project-images">
                <img src="flame_fixer.gif" alt="Flame Fixer combat demonstration" />
              </div>
              <p class="meta">
              Role: Concept design, Developement, Art
              </p>
            <p>
              There was a problem in the game, where players were not incentivised
              to move often. So, this boss was designed to encourage careful positioning
              in order to defeat it.
            </p>
            <ul class="meta">
              <li>
                Inflicts burn on hit, which slowly causes the flame fixer to deal more damage
                over time to the player, if they don't move away.
              </li>
              <li>
                Dashes towards the player 3 times in a row, requiring them to quickly react
                to the changing dash directions.
              </li>
              <li>
                Sends out a slow moving fireball projectile which locks on to the player, and
                bounces off walls to chase after them. However, if the players are able to
                redirect the fireball towards the flame fixer, they will be rewarded by stunning
                the flame fixer.
              </li>
            </ul>
            <div class="tags">
              <span class="tag">BYOND DM</span><span class="tag">AI</span
              ><span class="tag">VFX</span><span class="tag">Balance</span>
            </div>
            <p class="meta">
              <a
                href="https://github.com/vlggms/lobotomy-corp13/pull/2002"
                target="_blank"
                rel="noopener"
                >PR #2002 — Flame &amp; Metal Fixers</a
              >
            </p>
            <div style="margin-top: 14px;">
              <iframe width="100%" height="250" src="https://www.youtube.com/embed/RFp46V0uCJU" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style="border-radius: 8px;"></iframe>
            </div>
            </div>
          </details>

          <!-- Project 3 -->
          <details class="card">
            <summary>Shock Centipede — New Boss</summary>
            <div style="margin-top: 12px;">
              <p class="meta">
                Role: Concept Design, Developement
              </p>
            <p>
              A new creature that the player need to manage in LC13. 
              As with the above projects, I was looking for a way to add more 
              interactivity into the fight, so the shock centipede does the following 
              to increase it.
            </p>
            <ul class="meta">
              <li>
                Has a tail attack, which when hitting the player, give 
                the centipede some charge, while missing the attack will 
                cause it to lose some charge.
              </li>
              <li>
                At high levels of charge, the centipede will coil up, giving
                it some temporary health. 
              </li>
              <li>
                Then the player is faced with a 
                choice, attempt to break the shield which could stun the 
                centipede or they could run away from the centipede to avoid 
                discharge attack which stuns nearby players.
              </li>
              <li>
                <strong>Notice: I did not make the 2D pixel art for the shock centipede.</strong>
              </li>
              </ul>
            <div class="tags">
              <span class="tag">BYOND DM</span
              ><span class="tag">Creature Design</span
              ><span class="tag">Telegraphs</span>
            </div>
            <p class="meta">
              <a
                href="https://github.com/vlggms/lobotomy-corp13/pull/1579"
                target="_blank"
                rel="noopener"
                >PR #1579 — Shock Centipede</a
              >
            </p>
            <div style="margin-top: 14px;">
              <iframe width="100%" height="250" src="https://www.youtube.com/embed/d73Cp10vZAA" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style="border-radius: 8px;"></iframe>
            </div>
            </div>
          </details>

          <!-- Project 4 -->
          <details class="card">
            <summary>Door to Nowhere — New Area</summary>
            <div style="margin-top: 12px;">
              <p class="meta">
                Role: Implementation, Level Design, Story Design
              </p>
            <p>
              Built the Door to Nowhere abnormality, which is able to 
              teleport players into a new area to explore. This level 
              is supposed to be a massive maze, in which the players 
              will need to solve 3 puzzles in order to escape this maze.
            </p>
            <ul class="meta">
              <li>
                <strong>Notice: The 2D pixel art for the Door itself is not made by me</strong>
              </li>
            </ul>
            <div class="tags">
              <span class="tag">BYOND DM</span>
              <span class="tag">Level Design</span>
              <span class="tag">Animations</span>
            </div>
            <p class="meta">
              <a
                href="https://github.com/Lobotomy-Corporation-13/lc13/pull/33"
                target="_blank"
                rel="noopener"
                >PR #33 — Door to Nowhere</a
              >
            </p>
            <div style="margin-top: 14px;">
              <iframe width="100%" height="250" src="https://www.youtube.com/embed/S1TFaS6EGgM" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style="border-radius: 8px;"></iframe>
            </div>
            </div>
          </details>
        </div>
      </section>

      <!-- PIXEL ART -->
      <section id="pixelart" aria-labelledby="art-h">
        <h2 id="art-h">Pixel Art</h2>
        <div class="grid">
          <article class="card">
            <h3>Combat Sprites & Effects</h3>
            <p class="meta">
              Original 2D pixel art created for Lobotomy Corporation 13
            </p>
            <p>
              Throughout my work on LC13, I've created numerous sprites for bosses,
              weapons, effects, and UI elements. These sprites maintain the game's
              visual style while adding distinctive character to new content.
            </p>
            <div style="margin-top: 14px;">
              <img src="rce_sprites.png" alt="Collection of sprites created for LC13" style="width: 100%; border-radius: 8px; border: 1px solid #1f2732; image-rendering: pixelated;">
            </div>
            <div class="tags">
              <span class="tag">Pixel Art</span>
              <span class="tag">Animation</span>
              <span class="tag">VFX</span>
            </div>
          </article>
        </div>
      </section>

      <!-- CODE SHOWCASE -->
      <section id="codeshowcase" aria-labelledby="showcase-h">
        <h2 id="showcase-h">Code Showcase</h2>

        <!-- Featured Code Example -->
        <article class="card" style="margin-bottom: 20px;">
            <h3>Damage Resistance Component</h3>
            <p class="meta">
              Armor damage calculation with type-specific resistance caps
            </p>
            <p>
              This component handles damage mitigation through armor, with special logic
              to cap resistance at 95% and update visual armor ratings based on damage type.
            </p>
            <pre><code>/<span style="color: #7bd389;">datum</span>/component/augment/resisting_augment/take_damage_effect<span style="color: #ffd700;">(</span><span style="color: #7bd389;">datum</span>/source, damage, damagetype, def_zone<span style="color: #ffd700;">)</span>
    . = ..<span style="color: #ffd700;">(</span><span style="color: #ffd700;">)</span>
    <span style="color: #6c757d;">// Only update armor once per damage event</span>
    <span style="color: #c586c0;">if</span><span style="color: #ffd700;">(</span>can_update_armor<span style="color: #ffd700;">)</span>
        can_update_armor = <span style="color: #569cd6;">FALSE</span>
        <span style="color: #6c757d;">// Get current armor value for this damage type</span>
        <span style="color: #569cd6;">var</span>/<span style="color: #9cdcfe;">armor</span> = human_parent.getarmor<span style="color: #ffd700;">(</span><span style="color: #569cd6;">null</span>, damagetype<span style="color: #ffd700;">)</span>
        <span style="color: #6c757d;">// Calculate total resistance from augment effects</span>
        total_damage_resist = get_total_damage_resist<span style="color: #ffd700;">(</span>source, damage, damagetype, def_zone<span style="color: #ffd700;">)</span>

        <span style="color: #6c757d;">// Cap total resistance at 95% to prevent invulnerability</span>
        <span style="color: #c586c0;">if</span> <span style="color: #ffd700;">(</span>armor > <span style="color: #b5cea8;">0</span><span style="color: #ffd700;">)</span>
            <span style="color: #c586c0;">if</span> <span style="color: #ffd700;">(</span>armor > <span style="color: #b5cea8;">95</span><span style="color: #ffd700;">)</span>
                total_damage_resist = <span style="color: #b5cea8;">0</span>
            <span style="color: #c586c0;">else if</span><span style="color: #da70d6;">(</span><span style="color: #ffd700;">(</span>total_damage_resist + armor<span style="color: #ffd700;">)</span> > <span style="color: #b5cea8;">95</span><span style="color: #da70d6;">)</span>
                total_damage_resist = armor - <span style="color: #b5cea8;">95</span>

        <span style="color: #6c757d;">// Apply resistance to armor</span>
        armor += total_damage_resist
        <span style="color: #6c757d;">// Update the specific damage type's armor rating</span>
        <span style="color: #c586c0;">switch</span><span style="color: #ffd700;">(</span>damagetype<span style="color: #ffd700;">)</span>
            <span style="color: #c586c0;">if</span> <span style="color: #ffd700;">(</span><span style="color: #ce9178;">RED_DAMAGE</span><span style="color: #ffd700;">)</span>
                human_parent.physiology.armor.setRating<span style="color: #ffd700;">(</span>red=armor<span style="color: #ffd700;">)</span>
            <span style="color: #c586c0;">if</span> <span style="color: #ffd700;">(</span><span style="color: #ce9178;">WHITE_DAMAGE</span><span style="color: #ffd700;">)</span>
                human_parent.physiology.armor.setRating<span style="color: #ffd700;">(</span>white=armor<span style="color: #ffd700;">)</span>
            <span style="color: #c586c0;">if</span> <span style="color: #ffd700;">(</span><span style="color: #ce9178;">BLACK_DAMAGE</span><span style="color: #ffd700;">)</span>
                human_parent.physiology.armor.setRating<span style="color: #ffd700;">(</span>black=armor<span style="color: #ffd700;">)</span>
            <span style="color: #c586c0;">if</span> <span style="color: #ffd700;">(</span><span style="color: #ce9178;">PALE_DAMAGE</span><span style="color: #ffd700;">)</span>
                human_parent.physiology.armor.setRating<span style="color: #ffd700;">(</span>pale=armor<span style="color: #ffd700;">)</span>
        armor_changed = <span style="color: #569cd6;">TRUE</span>
        <span style="color: #c586c0;">return</span></code></pre>
            <div class="tags">
              <span class="tag">BYOND DM</span>
              <span class="tag">Component System</span>
              <span class="tag">Damage Calculation</span>
            </div>
          </article>

        <div class="grid">
          <details class="card">
            <summary>Tremor Defense Augment</summary>
            <div style="margin-top: 12px;">
              <p class="meta">
                Stacking resistance effect with scaling calculation
              </p>
            <p>
              Implements a stacking defense mechanism where resistance scales based on
              the number of status effect stacks, providing diminishing returns.
            </p>
            <pre><code><span style="color: #6c757d;">// Tremor Defense - Provides stacking resistance based on tremor status</span>
/<span style="color: #7bd389;">datum</span>/component/augment/resisting_augment/tremor_defense
    <span style="color: #6c757d;">// Base resistance per stack (5%)</span>
    <span style="color: #569cd6;">var</span>/<span style="color: #9cdcfe;">damage_resist</span> = <span style="color: #b5cea8;">0.05</span>

<span style="color: #6c757d;">// Calculate resistance based on tremor stacks</span>
/<span style="color: #7bd389;">datum</span>/component/augment/resisting_augment/tremor_defense/get_total_damage_resist<span style="color: #ffd700;">(</span><span style="color: #7bd389;">datum</span>/source, damage, damagetype, def_zone<span style="color: #ffd700;">)</span>
    <span style="color: #6c757d;">// Check if player has tremor status effect</span>
    <span style="color: #569cd6;">var</span>/<span style="color: #7bd389;">datum</span>/status_effect/stacking/lc_tremor/<span style="color: #9cdcfe;">UT</span> = human_parent.has_status_effect<span style="color: #ffd700;">(</span>/<span style="color: #7bd389;">datum</span>/status_effect/stacking/lc_tremor<span style="color: #ffd700;">)</span>
    <span style="color: #569cd6;">var</span>/<span style="color: #9cdcfe;">resist</span> = <span style="color: #b5cea8;">0</span>
    <span style="color: #6c757d;">// Only applies to RED and BLACK damage types</span>
    <span style="color: #c586c0;">if</span><span style="color: #ffd700;">(</span>UT && <span style="color: #da70d6;">(</span>damagetype == <span style="color: #ce9178;">RED_DAMAGE</span> || damagetype == <span style="color: #ce9178;">BLACK_DAMAGE</span><span style="color: #da70d6;">)</span><span style="color: #ffd700;">)</span>
        <span style="color: #6c757d;">// Resistance scales with stacks (every 10 stacks = 1 tier)</span>
        resist = round<span style="color: #ffd700;">(</span>UT.stacks/<span style="color: #b5cea8;">10</span><span style="color: #ffd700;">)</span> * damage_resist * repeat
    <span style="color: #6c757d;">// Cap resistance with diminishing returns (30% base, +20% per repeat)</span>
    <span style="color: #c586c0;">if</span><span style="color: #ffd700;">(</span>resist > <span style="color: #da70d6;">(</span><span style="color: #b5cea8;">0.3</span> + <span style="color: #87ceeb;">(</span><span style="color: #b5cea8;">0.2</span> * <span style="color: #ffa500;">(</span>repeat - <span style="color: #b5cea8;">1</span><span style="color: #ffa500;">)</span><span style="color: #87ceeb;">)</span><span style="color: #da70d6;">)</span><span style="color: #ffd700;">)</span>
        resist = <span style="color: #b5cea8;">0.3</span> + <span style="color: #ffd700;">(</span><span style="color: #b5cea8;">0.2</span> * <span style="color: #da70d6;">(</span>repeat - <span style="color: #b5cea8;">1</span><span style="color: #da70d6;">)</span><span style="color: #ffd700;">)</span>

    <span style="color: #c586c0;">return</span> resist

<span style="color: #6c757d;">// Apply damage reduction and notify player</span>
/<span style="color: #7bd389;">datum</span>/component/augment/resisting_augment/tremor_defense/take_damage_effect<span style="color: #ffd700;">(</span><span style="color: #7bd389;">datum</span>/source, damage, damagetype, def_zone<span style="color: #ffd700;">)</span>
    . = ..<span style="color: #ffd700;">(</span><span style="color: #ffd700;">)</span>
    <span style="color: #6c757d;">// Show damage reduction feedback to player</span>
    to_chat<span style="color: #ffd700;">(</span>human_parent, span_nicegreen<span style="color: #da70d6;">(</span><span style="color: #ce9178;">"You took [total_damage_resist * 100]% less damage! Due to Tremor Defense"</span><span style="color: #da70d6;">)</span><span style="color: #ffd700;">)</span></code></pre>
            <div class="tags">
              <span class="tag">BYOND DM</span>
              <span class="tag">Status Effects</span>
              <span class="tag">Scaling Mechanics</span>
            </div>
            </div>
          </details>
        </div>
      </section>

      <!-- DESIGN DOCS -->
      <section id="docs" aria-labelledby="docs-h">
        <h2 id="docs-h">Game design documents (briefs)</h2>

        <!-- Featured Design Document -->
        <article class="card" style="margin-bottom: 20px;">
            <h3>Weaponry Grid Crafting System</h3>
            <p class="meta">
              Strategic coordinate-based crafting with material movement mechanics
            </p>
            <p>
              A unique crafting system where players navigate a "focus point" through an infinite 2D
              coordinate grid using weaponry materials. Each material's rarity, damage type, and density
              determines movement distance and direction, creating a strategic puzzle to reach weapon
              coordinates and craft city weapons.
            </p>
            <ul class="meta">
              <li>
                <strong>Core loop:</strong> use materials → move focus point → reach weapon radius → craft weapon
              </li>
              <li>Material properties determine movement patterns (RED: cardinal, WHITE: diagonal, PALE: teleport)</li>
              <li>Includes weaponry disassembler to convert existing weapons into navigation shards</li>
            </ul>
            <div class="tags">
              <span class="tag">Crafting System</span>
              <span class="tag">Resource Management</span>
              <span class="tag">Grid Navigation</span>
            </div>
            <p class="meta" style="margin-top: 10px;">
              <a
                href="https://docs.google.com/document/d/14J5MQtU4mg6DL8xl6ePX9LRrQmGXZD8EtiAAi8COXjA/edit?usp=sharing"
                target="_blank"
                rel="noopener"
                >View Design Document →</a
              >
            </p>
          </article>

        <div class="grid">
          <details class="card">
            <summary>Prosthetics Surgeon Expansion</summary>
            <div style="margin-top: 12px;">
              <p class="meta">
                Role progression system with customizable augments and attachments
              </p>
            <p>
              Addresses the Prosthetics Surgeon being the least complex City Mode role by introducing
              two new fabrication systems: the Augment Fabricator (custom player augments with templates,
              effects, and progression) and the Attachment Fabricator (weapon modifications with status
              effects and synergies).
            </p>
            <ul class="meta">
              <li>
                <strong>Design goal:</strong> create repeat customer value through customization and progression
              </li>
              <li>EP point budget system with positive/negative effects for build variety</li>
              <li>Dynamic market with sales/markups every 20 minutes to encourage strategic timing</li>
            </ul>
            <div class="tags">
              <span class="tag">Systems Design</span>
              <span class="tag">Progression</span>
              <span class="tag">Customization</span>
            </div>
            <p class="meta" style="margin-top: 10px;">
              <a
                href="https://docs.google.com/document/d/1r434lx5XZ11bnW1-r5tADwjAzEd8kZ05j0n7ISB6xmc/edit?usp=sharing"
                target="_blank"
                rel="noopener"
                >View Design Document →</a
              >
            </p>
            </div>
          </details>
        </div>
      </section>

      <!-- CONTACT -->
      <section id="contact" aria-labelledby="ct-h">
        <h2 id="ct-h">Contact</h2>
        <p class="meta">
          Email: <strong>your.email@example.com</strong> · GitHub:
          <a href="https://github.com/EnderMage99">EnderMage99</a>
        </p>
      </section>

      <footer>
        <p>
          © <span id="year"></span> Mark “EnderMage99”. Open‑source
          contributions credited to their respective communities.
        </p>
      </footer>
    </main>

    <!-- Lightbox -->
    <div class="lightbox" id="lightbox">
      <span class="lightbox-close" id="lightbox-close">&times;</span>
      <img id="lightbox-img" src="" alt="">
    </div>

    <script>
      document.getElementById("year").textContent = new Date().getFullYear();

      // Lightbox functionality
      const lightbox = document.getElementById('lightbox');
      const lightboxImg = document.getElementById('lightbox-img');
      const lightboxClose = document.getElementById('lightbox-close');

      // Add click event to all images except those in iframes
      document.querySelectorAll('img').forEach(img => {
        img.addEventListener('click', function() {
          lightbox.classList.add('active');
          lightboxImg.src = this.src;
          lightboxImg.alt = this.alt;
        });
      });

      // Close lightbox on click
      lightbox.addEventListener('click', function(e) {
        if (e.target !== lightboxImg) {
          lightbox.classList.remove('active');
        }
      });

      lightboxClose.addEventListener('click', function() {
        lightbox.classList.remove('active');
      });

      // Close on Escape key
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          lightbox.classList.remove('active');
        }
      });
    </script>
  </body>
</html>
